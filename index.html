<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Slot Mahjong</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0b3d2e;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      overflow: hidden;
    }
    header {
      padding: 10px;
      text-align: center;
      font-size: 20px;
      background: #145c44;
      width: 100%;
    }
    .balance {
      margin: 10px;
      font-size: 18px;
    }
    .slot {
      display: grid;
      grid-template-columns: repeat(5, 70px);
      grid-template-rows: repeat(4, 70px);
      gap: 5px;
      background: #063524;
      padding: 10px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
      overflow: hidden;
    }
    .tile {
      width: 100%;
      height: 100%;
      background: #fff;
      border-radius: 8px;
      padding: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fall 0.5s ease forwards;
      opacity: 0;
      transform: translateY(-120px);
    }
    .tile img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    @keyframes fall {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .controls {
      margin-top: 15px;
    }
    button {
      background: gold;
      border: none;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      color: #333;
    }
    button:active {
      transform: scale(0.96);
    }
    @media (max-width: 600px) {
      .slot {
        grid-template-columns: repeat(5, 60px);
        grid-template-rows: repeat(4, 60px);
      }
    }
  </style>
</head>
<body>
  <header>ðŸŽ° Slot Mahjong</header>
  <div class="balance">Saldo: <span id="balance">Rp. 1.000.000</span></div>
  <div class="slot" id="slot"></div>
  <div class="controls">
    <button onclick="spin()">SPIN</button>
  </div>

  <script>
    const tiles = [
      // Dots
      "dots1.png","dots2.png","dots3.png","dots4.png","dots5.png","dots6.png","dots7.png","dots8.png","dots9.png",
      // Bamboo
      "bamboo1.png","bamboo2.png","bamboo3.png","bamboo4.png","bamboo5.png","bamboo6.png","bamboo7.png","bamboo8.png","bamboo9.png",
      // Characters
      "characters1.png","characters2.png","characters3.png","characters4.png","characters5.png",
      "characters6.png","characters7.png","characters8.png","characters9.png",
      // Winds
      "wind_east.png","wind_south.png","wind_west.png","wind_north.png",
      // Dragons
      "dragon_red.png","dragon_green.png","dragon_white.png",
      // Special
      "wild.png","scatter.png"
    ];

    const slot = document.getElementById("slot");
    const balanceEl = document.getElementById("balance");
    let balance = 1000000; // Rp. 1.000.000
    const bet = 10000; // Rp. 10.000 per spin

    function renderBoard(board) {
      slot.innerHTML = "";
      board.forEach((tile, index) => {
        const div = document.createElement("div");
        div.className = "tile";
        div.style.animationDelay = (index % 5) * 0.1 + "s"; // efek jatuh per kolom
        const img = document.createElement("img");
        img.src = "img/tiles/" + tile;
        div.appendChild(img);
        slot.appendChild(div);
      });
    }

    function spin() {
      if (balance < bet) {
        alert("Saldo habis!");
        return;
      }
      balance -= bet;

      let board = [];
      for (let i = 0; i < 20; i++) { // 4x5
        const randomTile = tiles[Math.floor(Math.random() * tiles.length)];
        board.push(randomTile);
      }

      renderBoard(board);
      checkWin(board);

      balanceEl.textContent = "Rp. " + balance.toLocaleString();
    }

    function checkWin(board) {
      // Cek sederhana: jika ada >=3 scatter â†’ menang 50.000
      let scatters = board.filter(t => t === "scatter.png").length;
      if (scatters >= 3) {
        balance += 50000;
        setTimeout(() => {
          alert("Scatter muncul " + scatters + " kali! Menang Rp. 50.000");
          balanceEl.textContent = "Rp. " + balance.toLocaleString();
        }, 600);
      }
    }

    // Render awal
    renderBoard(Array(20).fill("dots1.png"));
  </script>
</body>
</html>
